var cbody;
var layindex=null;
var loadAgian=false;
function jsnull(){return;}
Array.prototype.baoremove = function(dx) {//删除数组指定下标的元素
    if(isNaN(dx)||dx>this.length){return false;} 
    this.splice(dx,1); 
}
$(document).ready(function($) {
	cbody=(window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');
	layPrompt();
});
function layPrompt(){
	$('.lay_prompt').hover(function(){
			layer.tips($(this).attr('alt'), $(this),{time:50000});
		},
		function(){
			layer.closeAll('tips');
		}
	);
}
function goto(div,str,u,t){
	//console.log(div,str);
	if(div){
		cbody.animate({scrollTop: div.offset().top}, 1000);
	}
	if(str){
		layer.msg(str);
	}
	if(u){
		if(!t){
			t=0;
		}
		if(t>0){
			setTimeout(function(){
				window.location.href=u;	
			},t)
		}
		else{
			window.location.href=u;	
		}
	}
}
function checkMobile(s){
	var isMobile=/^(?:13\d|14\d|15\d|17\d|18\d)\d{5}(\d{3}|\*{3})$/; //手机号码验证规则
	if(!isMobile.test(s)){ //如果用户输入的值不同时满足手机号和座机号的正则
		return false;         //返回一个错误，不向下执行
	}
	return true;
}
function isNum(t) {
	if(!isNaN(t)){
		return true;
	}
	else{
		return false;
	}
}

function ajax(url,data,success){
	$.ajax({
		url: url,
		type:'post',
		dataType: 'json',
		data:data,
		success: function(data){
			if(data){
				if(data['state']!='error'){
					success(data['data']);
				}
				else{
					goto(false,data['data']);
				}
			}
			else{
				goto(false,'服务器端故障，请稍后再试');
			}
		}
	});
}

function openlayer(url,w,h,title){
	layindex=layer.open({
		type: 2,
		title: false,
		shadeClose: true,
		shade: 0.3,
		area: [w+'px', h+'px'],
		fix:false,
		content: [url, 'yes']//iframe的url，no代表不显示滚动条
	});
}
function layerClose(){
	if(layindex){
		layer.close(layindex);
		layindex=null;
	}
	else{
		layer.closeAll();
	}
	if(loadAgian){
		addList();
	}
}
function layerClose2(){
	
	if(layindex){
		layer.close(layindex);
		layindex=null;
	}
	else{
		layer.closeAll();
	}
	window.location.href=window.location.href;
}
function dbjdcx(){
	openlayer('/db/jdcx',1100,460);
}
function fixZero(num,length){
	var str=''+num;
	var len=str.length;
	var s='';
	for(var i=length;i<len;i++){
		s+='0';
	}
	return s+str;
}
function getWindow(wmax,hmax){
	var wWidth=$(window).width();
	var wHeight=$(window).height();
	if(wWidth<wmax) wmax=wWidth;
	if(wHeight<hmax) hmax=wHeight;
	return [wmax,hmax];
}